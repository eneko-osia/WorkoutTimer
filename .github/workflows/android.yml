name: android

on:
    push:
        branches:
            - 'master'
            - 'develop'
        paths-ignore:
            - '**.md'
    pull_request:
        branches:
            - 'master'
            - 'develop'
        paths-ignore:
            - '**.md'

jobs:
    build-android:
        name: Build Android
        runs-on: ubuntu-latest

        steps:
        - name: Checkout repository
          uses: actions/checkout@v3

        - name: Set up Java
          uses: actions/setup-java@v3
          with:
            distribution: 'temurin'
            java-version: '17'

        - name: Set up Node
          uses: actions/setup-node@v3
          with:
            node-version: '18'

        - name: Install dependencies
          run: npm install

        # - name: Run Lint (optional)
        #   run: npm run lint

        - name: Cache Gradle
          uses: actions/cache@v3
          with:
            path: |
                ~/.gradle/caches
                ~/.gradle/wrapper
            key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
            restore-keys: |
                ${{ runner.os }}-gradle-

        - name: Build Android (assembleDebug)
          working-directory: android
          run: ./gradlew assembleDebug
